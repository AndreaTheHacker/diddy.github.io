<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Console Hacker License - Official Test & NFC</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Fira+Code&family=Roboto+Mono&display=swap');
  body {
    background: #0f0f1a;
    color: #eee;
    font-family: 'Fira Code', monospace;
    margin: 0; padding: 0;
    display: flex; flex-direction: column; align-items: center; min-height: 100vh;
  }
  header {
    background: linear-gradient(90deg, #0ff, #08f);
    padding: 1.5rem 2rem;
    width: 100%;
    text-align: center;
    font-size: 1.7rem;
    font-weight: 700;
    letter-spacing: 1.1px;
    color: #000c;
    text-shadow: 0 0 5px #0ff;
    user-select: none;
  }
  main {
    max-width: 900px;
    margin: 2rem auto 4rem;
    background: #121224dd;
    border-radius: 12px;
    padding: 2rem 2.5rem;
    box-shadow: 0 0 15px #0af;
  }
  h1 {
    margin-top: 0;
    font-weight: 800;
    text-align: center;
    letter-spacing: 1.5px;
  }
  .instructions {
    font-size: 0.9rem;
    color: #99cceeaa;
    margin-bottom: 1.4rem;
    user-select:none;
  }
  form {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem 2rem;
    margin-bottom: 2rem;
  }
  label {
    font-weight: 600;
    font-size: 0.95rem;
    color: #77aaffcc;
  }
  input[type=text] {
    background: #1a1a2e;
    border: 2px solid #0aa;
    border-radius: 6px;
    padding: 8px 12px;
    color: #ccf;
    font-family: monospace;
    font-weight: 500;
    letter-spacing: 1.2px;
    transition: border-color 0.3s ease;
  }
  input[type=text]:focus {
    border-color: #0ff;
    outline: none;
    box-shadow: 0 0 8px #0ff77;
  }
  .full-width {
    grid-column: 1 / -1;
  }
  button {
    background: #0077cc;
    border: none;
    color: #cceeff;
    font-weight: 700;
    font-size: 1rem;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    letter-spacing: 1.2px;
    transition: background 0.3s ease, transform 0.2s ease;
    user-select:none;
  }
  button:hover {
    background: #00aaff;
    transform: scale(1.05);
  }
  button:active {
    transform: scale(0.97);
  }
  #result {
    white-space: pre-wrap;
    background: #111622;
    border: 2px solid #08f;
    border-radius: 12px;
    padding: 1rem 1.4rem;
    font-family: 'Roboto Mono', monospace;
    font-size: 0.9rem;
    min-height: 8rem;
    margin-bottom: 2rem;
    color: #99ccff;
  }
  .hidden {
    display: none !important;
  }
  .status-msg {
    font-size: 1.1rem;
    margin-bottom: 1rem;
    font-weight: 700;
    color: #77ccff;
    user-select:none;
  }
  .error {
    color: #ff5555;
  }
  .success {
    color: #55ff77;
  }
  .rank-badge {
    font-weight: 900;
    padding: 0.3rem 1rem;
    border-radius: 999px;
    margin-top: 0.4rem;
    display: inline-block;
    font-size: 1.1rem;
    user-select:none;
    filter: drop-shadow(0 0 3px #0ff);
  }
  .rank-0 { background: #551111; color: #ff4444; }
  .rank-1 { background: #662222; color: #ff6655; }
  .rank-2 { background: #773333; color: #ff8866; }
  .rank-3 { background: #994422; color: #ffaa77; }
  .rank-4 { background: #bb6622; color: #ffd377; }
  .rank-5 { background: #dd8822; color: #fffc88; }
  .rank-6 { background: #ffee33; color: #000000; }
  .rank-7 { background: #bbff55; color: #004400; }
  .rank-8 { background: #55ff99; color: #004433; }
  .rank-9 { background: #22ccaa; color: #004455; }
  .rank-10 { background: #00aaff; color: #002244; }
  
  .section {
    margin-bottom: 2.6rem;
  }
  #license-card {
    border: 3px solid #0af;
    border-radius: 15px;
    padding: 1rem 1.6rem;
    font-family: 'Roboto Mono', monospace;
    font-size: 1.05rem;
    background: linear-gradient(135deg, #0af, #004466);
    color: #bbddff;
    user-select:none;
    box-shadow: 0 0 20px #0af88;
  }
  #license-card small {
    color: #88ccffaa;
  }
  #license-card .card-number {
    font-weight: 900;
    font-size: 1.3rem;
    letter-spacing: 3px;
    margin-top: 0.2rem;
    user-select: text;
  }
  #license-card .card-name {
    font-weight: 700;
    font-size: 1.25rem;
    margin-top: 0.4rem;
    text-transform: uppercase;
  }
  #license-card .card-rank {
    margin-top: 0.8rem;
    font-weight: 900;
  }
  #license-card .signature {
    margin-top: 1rem;
    font-size: 0.85rem;
    font-family: 'Courier New', Courier, monospace;
    user-select: text;
  }
  #license-card .timestamp {
    margin-top: 0.3rem;
    font-size: 0.75rem;
    color: #99ccff88;
  }

  /* Animations */
  .fade-in {
    animation: fadein 1.2s ease forwards;
    opacity: 0;
  }
  @keyframes fadein {
    to { opacity: 1; }
  }
  .progress-bar {
    height: 10px;
    background: #004466;
    border-radius: 6px;
    overflow: hidden;
    margin: 10px 0 15px;
  }
  .progress-bar > div {
    height: 100%;
    background: #00aaff;
    width: 0;
    transition: width 1s ease-in-out;
  }
  footer {
    width: 100%;
    text-align: center;
    padding: 1rem 0;
    font-size: 0.85rem;
    color: #3399ccaa;
    user-select:none;
  }
  a {
    color: #0ff;
    text-decoration: none;
    font-weight: 700;
  }
  a:hover {
    text-decoration: underline;
  }
</style>
</head>
<body>

<header>
  CONSOLE HACKER LICENSE - OFFICIAL TEST & NFC AUTHENTICATION
</header>

<main>
  <section class="section" id="test-section">
    <h1>Console Hacker License Test</h1>
    <p class="instructions">Answer the 20 questions below (choose A, B, C, or D). Type your answer letters in the boxes. Once you submit, your score will be calculated and a signed license card will be generated for you.</p>
    <form id="test-form" autocomplete="off" spellcheck="false" novalidate>
      <!-- We'll just ask 5 questions for demo -->
      <label for="q1">1. What does UAF stand for?</label>
      <input type="text" maxlength="3" id="q1" name="q1" placeholder="Answer (A-D)" pattern="[A-Da-d]" required />
      
      <label for="q2">2. Which port does HTTP use by default?</label>
      <input type="text" maxlength="3" id="q2" name="q2" placeholder="Answer (A-D)" pattern="[A-Da-d]" required />
      
      <label for="q3">3. What is heap spraying?</label>
      <input type="text" maxlength="3" id="q3" name="q3" placeholder="Answer (A-D)" pattern="[A-Da-d]" required />
      
      <label for="q4">4. What year was PS4 launched?</label>
      <input type="text" maxlength="3" id="q4" name="q4" placeholder="Answer (A-D)" pattern="[A-Da-d]" required />
      
      <label for="q5" class="full-width">5. Which syscall is NOT available in PS4 libkernel?</label>
      <input type="text" maxlength="3" id="q5" name="q5" placeholder="Answer (A-D)" pattern="[A-Da-d]" required />
      
      <button type="submit" class="full-width">Submit Test & Generate License</button>
    </form>

    <div class="progress-bar hidden" id="progress-bar"><div></div></div>
    <div id="result" class="hidden" aria-live="polite"></div>
  </section>

  <section class="section" id="license-section" class="hidden" aria-live="polite">
    <h2>Your Signed License Card</h2>
    <div id="license-card" class="fade-in" aria-label="Signed Console Hacker License Card"></div>
    <button id="writeNfcBtn">Write License to NFC Tag / Bracelet</button>
  </section>

  <section class="section" id="auth-section" aria-live="polite">
    <h2>Authenticate Existing License Card via NFC Scan</h2>
    <p class="instructions">Tap the button and hold your NFC tag or bracelet to the device to scan and verify a license card.</p>
    <button id="authNfcBtn">Authenticate with NFC</button>
    <div id="authResult" class="status-msg"></div>
  </section>

  <section class="section">
    <button id="resetBtn" style="background:#a00;">Reset All & Try Again</button>
  </section>
</main>

<footer>
  &copy; 2025 Console Hacker License Project â€” Crafted with ðŸ”¥ by ChatGPT
</footer>

<script>
(() => {
  'use strict';

  const answersKey = {
    q1: 'A', // Use consistent correct answers for demo
    q2: 'B',
    q3: 'C',
    q4: 'D',
    q5: 'A'
  };

  // Mapping test answers to "levels"
  // 0-1 correct: Level 1, 2-3: Level 3, 4-5: Level 5 (top)
  function calculateLevel(score) {
    if(score <= 1) return 1;
    if(score <= 3) return 3;
    return 5;
  }

  // Generate a unique pseudo-random card number based on user answers and timestamp
  function generateCardNumber(text) {
    // Simple hash fn (FNV-1a 32-bit) to simulate fingerprint
    let hash = 2166136261;
    for(let i=0; i<text.length; i++) {
      hash ^= text.charCodeAt(i);
      hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);
    }
    return (hash >>> 0).toString(16).toUpperCase().padStart(8, '0');
  }

  // Fake signature generator for demo
  function generateSignature(cardNumber, level) {
    return `--[ Gemini_AI_Auth ]--\nOfficially Verified by Google Gemini\nTimestamp: ${new Date().toISOString()}\nHash: 0x${cardNumber}_0xFA7B3D1C_0xC2A9F8E7_0x1F0D6B8A\n---[ CONSOLE.HACK.APPROVED ]---`;
  }

  // Get rank description & badge
  function getRank(level) {
    switch(level) {
      case 1: return { text: 'Junior Console Hacker ðŸš€', className: 'rank-1' };
      case 3: return { text: 'Intermediate Console Hacker ðŸ”¥', className: 'rank-3' };
      case 5: return { text: 'Elite Console Hacker ðŸ‘‘', className: 'rank-5' };
      default: return { text: 'Console Hacker', className: 'rank-0' };
    }
  }

  // Validate answers input: A-D letters only, case insensitive
  function validateAnswers(formData) {
    for(let [key, value] of formData.entries()) {
      if(!/^[A-Da-d]$/.test(value)) {
        return false;
      }
    }
    return true;
  }

  // Animate progress bar width
  function animateProgressBar(score, maxScore = 5) {
    const progressBar = document.getElementById('progress-bar');
    const innerBar = progressBar.firstElementChild;
    progressBar.classList.remove('hidden');
    const percent = (score / maxScore) * 100;
    innerBar.style.width = '0%';
    setTimeout(() => {
      innerBar.style.width = percent + '%';
    }, 50);
  }

  // Generate and display license card HTML
  function displayLicenseCard(name, level, cardNumber, signature) {
    const card = document.getElementById('license-card');
    const rank = getRank(level);

    card.innerHTML = `
      <div class="card-name">${name}</div>
      <div class="card-rank rank-badge ${rank.className}">${rank.text}</div>
      <div class="card-number">#${cardNumber}</div>
      <pre class="signature">${signature}</pre>
      <div class="timestamp">Issued: ${new Date().toLocaleString()}</div>
    `;
  }

  // Simulate verifying signature (dummy check)
  function verifySignature(signature) {
    return typeof signature === 'string' && signature.includes('Gemini_AI_Auth');
  }

  // Generate card from answers & user name (hardcoded "Player" for demo)
  function generateCardFromAnswers(formData) {
    let text = '';
    let score = 0;
    for(const [key, val] of formData.entries()) {
      text += val.toUpperCase();
      if(val.toUpperCase() === answersKey[key]) score++;
    }
    animateProgressBar(score, 5);
    const level = calculateLevel(score);
    const cardNumber = generateCardNumber(text + Date.now());
    const signature = generateSignature(cardNumber, level);
    return { level, cardNumber, signature, score };
  }

  // NFC helpers

  async function writeNfcTag(text) {
    if(!('NDEFReader' in window)) throw new Error('NFC not supported in this browser.');
    const ndef = new NDEFReader();
    await ndef.write(text);
  }

  async function scanNfcTag() {
    if(!('NDEFReader' in window)) throw new Error('NFC not supported in this browser.');
    const ndef = new NDEFReader();
    return new Promise((resolve, reject) => {
      ndef.addEventListener("readingerror", () => reject(new Error("Cannot read NFC tag.")));
      ndef.addEventListener("reading", event => {
        const decoder = new TextDecoder();
        let messageText = '';
        for (const record of event.message.records) {
          if(record.recordType === "text") {
            messageText += decoder.decode(record.data);
          }
        }
        resolve(messageText);
      });
      ndef.scan().catch(err => reject(err));
    });
  }

  // UI elements
  const form = document.getElementById('test-form');
  const result = document.getElementById('result');
  const licenseSection = document.getElementById('license-section');
  const licenseCard = document.getElementById('license-card');
  const writeNfcBtn = document.getElementById('writeNfcBtn');
  const authNfcBtn = document.getElementById('authNfcBtn');
  const authResult = document.getElementById('authResult');
  const progressBar = document.getElementById('progress-bar');
  const resetBtn = document.getElementById('resetBtn');

  // Store generated license info globally
  let currentLicense = null;

  // Event: submit test answers and generate license
  form.addEventListener('submit', e => {
    e.preventDefault();
    authResult.textContent = '';
    const formData = new FormData(form);

    if(!validateAnswers(formData)) {
      result.textContent = 'Please enter valid answers (A-D only).';
      result.classList.remove('hidden');
      return;
    }

    const { level, cardNumber, signature, score } = generateCardFromAnswers(formData);

    result.textContent = `You scored ${score} out of 5. Your hacking level: ${getRank(level).text}`;
    result.classList.remove('hidden');
    licenseSection.classList.remove('hidden');

    displayLicenseCard('Player', level, cardNumber, signature);
    currentLicense = { level, cardNumber, signature };
  });

  // Event: Write license info to NFC tag
  writeNfcBtn.addEventListener('click', async () => {
    if(!currentLicense) {
      alert('No license card generated yet.');
      return;
    }
    try {
      await writeNfcTag(JSON.stringify(currentLicense));
      alert('License written to NFC tag successfully!');
    } catch(err) {
      alert('Failed to write NFC tag: ' + err.message);
    }
  });

  // Event: Authenticate license via NFC scan
  authNfcBtn.addEventListener('click', async () => {
    authResult.textContent = '';
    try {
      const text = await scanNfcTag();
      const license = JSON.parse(text);
      if(license && license.cardNumber && verifySignature(license.signature)) {
        authResult.textContent = `License verified! Card #${license.cardNumber} - Level: ${getRank(license.level).text}`;
      } else {
        authResult.textContent = 'Invalid or corrupted license card.';
      }
    } catch(err) {
      authResult.textContent = 'NFC scan failed: ' + err.message;
    }
  });

  // Reset everything
  resetBtn.addEventListener('click', () => {
    form.reset();
    result.textContent = '';
    licenseSection.classList.add('hidden');
    authResult.textContent = '';
    progressBar.classList.add('hidden');
    currentLicense = null;
  });

})();
</script>

</body>
</html>

